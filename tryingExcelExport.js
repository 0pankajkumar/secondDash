var arrData = [
  {
    _children: [
      {
        newApplicantCount: 529,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 1,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 3,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 30,
        recruiterScreenCount: 3,
        title: "applied"
      },
      {
        newApplicantCount: 0,
        newLeadCount: 21,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 1,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 1,
        recruiterScreenCount: 0,
        title: "sourced"
      },
      {
        newApplicantCount: 1,
        newLeadCount: 1,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 1,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 1,
        title: "referred"
      }
    ],
    title: "UI Developer - Experienced, Mumbai, Maharashtra, Jan 2018"
  },
  {
    _children: [
      {
        newApplicantCount: 929,
        newLeadCount: 5,
        offerCount: 1,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 3,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 3,
        recruiterScreenCount: 2,
        title: "applied"
      },
      {
        newApplicantCount: 156,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 1,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 1,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "university"
      },
      {
        newApplicantCount: 1,
        newLeadCount: 1,
        offerCount: 0,
        onsiteInterviewCount: 1,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 1,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "sourced"
      },
      {
        newApplicantCount: 7,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 1,
        title: "referred"
      }
    ],
    title:
      "Backend Engineer - Fresher 2019 Graduate, Mumbai, Maharashtra, Dec 2017"
  },
  {
    _children: [
      {
        newApplicantCount: 2169,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 1,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 4,
        recruiterScreenCount: 5,
        title: "applied"
      },
      {
        newApplicantCount: 4,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 1,
        title: "referred"
      },
      {
        newApplicantCount: 0,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "university"
      },
      {
        newApplicantCount: 0,
        newLeadCount: 2,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 1,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "sourced"
      }
    ],
    title: "UI Developer - Fresher, Mumbai, Maharashtra, Dec 2017"
  },
  {
    _children: [
      {
        newApplicantCount: 1,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "referred"
      },
      {
        newApplicantCount: 52,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "applied"
      }
    ],
    title: "Backend Engineer - Experienced, Mumbai, Maharashtra, Feb 2018"
  },
  {
    _children: [
      {
        newApplicantCount: 0,
        newLeadCount: 6,
        offerCount: 1,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 5,
        recruiterScreenCount: 0,
        title: "university"
      },
      {
        newApplicantCount: 0,
        newLeadCount: 3,
        offerCount: 1,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "sourced"
      },
      {
        newApplicantCount: 1,
        newLeadCount: 1,
        offerCount: 1,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 0,
        title: "applied"
      }
    ],
    title: "BackEnd Developer Intern, Mumbai, Maharashtra, May 2019"
  },
  {
    _children: [
      {
        newApplicantCount: 436,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 2,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 3,
        recruiterScreenCount: 13,
        title: "applied"
      },
      {
        newApplicantCount: 4,
        newLeadCount: 0,
        offerCount: 0,
        onsiteInterviewCount: 0,
        onsiteToOfferCount: 0,
        phoneInterviewCount: 0,
        phoneToOfferCount: 0,
        phoneToOnsiteCount: 0,
        reachedOutCount: 0,
        recruiterScreenCount: 1,
        title: "referred"
      }
    ],
    title: "Backend Engineer - Experienced, Mumbai, Maharashtra, Jan 2018"
  }
];

let CSV = "";

let temp =
  "Origin" +
  "," +
  "New Lead" +
  "," +
  "Reached Out" +
  "," +
  "New Applicant" +
  "," +
  "Recruiter Screen" +
  "," +
  "Phone Interview" +
  "," +
  "Onsite" +
  "," +
  "Offer";

CSV += temp;
CSV += "\r\n\r\n";

for (let eachPost of arrData) {
  CSV += '"';
  CSV += eachPost["title"];
  CSV += '"\r\n';

  let newLeadSum = 0,
    reachedOutSum = 0,
    newApplicantSum = 0,
    recruiterScreenSum = 0,
    phoneInterviewSum = 0,
    onsiteInterviewSum = 0,
    offerSum = 0;
  for (let i = 0; i < eachPost["_children"].length; i++) {
    newLeadSum += parseInt(eachPost["_children"][i]["newLeadCount"]);
    reachedOutSum += parseInt(eachPost["_children"][i]["reachedOutCount"]);
    newApplicantSum += eachPost["_children"][i]["newApplicantCount"];
    recruiterScreenSum += eachPost["_children"][i]["recruiterScreenCount"];
    phoneInterviewSum += eachPost["_children"][i]["phoneInterviewCount"];
    onsiteInterviewSum += eachPost["_children"][i]["onsiteInterviewCount"];
    offerSum += eachPost["_children"][i]["offerCount"];

    let line = "";
    line += eachPost["_children"][i]["title"];
    line += ",";
    line += eachPost["_children"][i]["newLeadCount"];
    line += ",";
    line += eachPost["_children"][i]["reachedOutCount"];
    line += ",";
    line += eachPost["_children"][i]["newApplicantCount"];
    line += ",";
    line += eachPost["_children"][i]["recruiterScreenCount"];
    line += ",";
    line += eachPost["_children"][i]["phoneInterviewCount"];
    line += ",";
    line += eachPost["_children"][i]["onsiteInterviewCount"];
    line += ",";
    line += eachPost["_children"][i]["offerCount"];
    line += "\r\n";

    CSV += line;
  }

  CSV += ",";
  CSV += newLeadSum;
  CSV += ",";
  CSV += reachedOutSum;
  CSV += ",";
  CSV += newApplicantSum;
  CSV += ",";
  CSV += recruiterScreenSum;
  CSV += ",";
  CSV += phoneInterviewSum;
  CSV += ",";
  CSV += onsiteInterviewSum;
  CSV += ",";
  CSV += offerSum;
  CSV += "\r\n";

  CSV += "\r\n";
}
console.log(CSV);
